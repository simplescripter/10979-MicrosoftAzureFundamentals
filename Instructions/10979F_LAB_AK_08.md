# Lab Answer Key:  Module 8: Creating and managing Azure AD
# Lab: Create and manage Azure Active Directory tenants
  
## Exercise 1: Create users in Azure AD
  
#### Task 1: Create Azure AD users in the Azure AD Default Directory of an Azure subscription
  
1. From the lab vvv machine MIA-CL1, open Microsoft Edge, and then browse to [**http://portal.azure.com**](http://portal.azure.com). 

1. When prompted, sign in by using the Microsoft account that has the Global Administrator role in the Azure Active Directory tenant  you intend to use for this lab.

1. If presented with a dialog box informing about a new way to navigate Azure, click **Dock the portal menu**.

1. In the Azure portal, in the hub menu, click **Azure Active Directory**. 

1. On the **Default Directory - Overview** blade, in the vertical menu bar, click **Custom domain names**.

1. Note the current defalut domain name of your Azure AD tenant.

1. In the vertical menu bar, click **Users**.

1. On the **Users - All users** blade, click **+ New user**

1. On the **New user** blade, ensure that the **Create user** option is selected, specify the following settings, and click **Create**:

    - User name: **deanna\@*your Azure AD tenant domain name*** where ***your Azure AD tenant domain name*** is the domain name you identified in step 6 of this task

    - Name: **deanna**

    - First name: **Deanna**

    - Last name: **Ball**
    
    - Password: **Auto-generate password**
    
    - Show Password: **Enabled**

    - Groups: **0 group selected**
    
    - Roles: **User**
    
    - Block sign in: **No**
    
    - Usage location: **United States**
    
    - Job title: leave blank
    
    - Department: leave blank

    > **Note**: Copy the **User name** and **Password** values into Notepad. You will need them later in this lab.

1. Back on the **Users - All users** blade, click **+ New user**

1. On the **New user** blade, ensure that the **Create user** option is selected, specify the following settings, and click **Create**:

    - User name: **kari\@*your Azure AD tenant domain name*** where ***your Azure AD tenant domain name*** is the domain name you identified in step 6 of this task

    - Name: **kari**

    - First name: **Kari**

    - Last name: **Tran**
    
    - Password: **Auto-generate password**
    
    - Show Password: **Enabled**

    - Groups: **0 group selected**
    
    - Roles: click **User**, on the **Directory roles** blade, click **Global administrator**, and click **Select**
    
    - Block sign in: **No**
    
    - Usage location: **United States**
    
    - Job title: leave blank
    
    - Department: leave blank

    > **Note**: Copy the **User name** and **Password** values into Notepad. You will need them later in this lab.
    
1. Leave the Microsoft Edge window open. 


#### Task 2: Assign the subscription owner role to an Azure AD user
  
1. In the Azure portal, in the hub menu, click **All services**.

1. In the **Search All** text box, type **Subscriptions**.

1. In the list of search results, click **Subscriptions**.

1. On the **Subscriptions** blade, click the entry representing the subscription you are using in this lab. 

1. On the blade displaying settings of your subscription, in the vertical menu, click **Access control (IAM)**.

1. On the Access control (IAM) blade, click **+ Add** and then, in the drop-down list, click **Add role assignment**.

1. On the **Add role assignment** blade, in the **Role** drop-down list, click **Owner**.

1. Ensure that the **Azure AD user, group, or service principal** entry appears in the **Assign access to** drop down list.

1. In the list of Azure Active Directory identies, click **deanna**. 

1. Click **Save**.


#### Task 3: Sign in as new users to the Azure Portal
  
1. In the Microsoft Edge window, click the ellipsis (**...**) in the upper right corner and click **New InPrivate window**.

1. In the InPrivate window, browse to [**http://portal.azure.com**](http://portal.azure.com).

1. When prompted to sign in, in the **Email, phone, or Skype** text box, type the user name of the **deanna** Azure AD user account, including the **\@** symbol followed by the domain name you identified in the first task of this exercise and click **Next**.

1. In the **Password** text box, type the password you noted while creating the **deanna** user account and click **Sign in**.

1. You will be presented with the **Update your password** pane. Enter the following details and then click **Update password and sign in**:

    - Current password: type the same password you just entered.

    - New password: a new password

    - Confirm password: the new password you just entered
  
    > **Note**: If you receive the message **We've seen that password too many times before. Choose something harder to guess**, you'll need to modify the password until it is unique enough to be accepted.

1. If prompted whether to **Stay signed in?"** click **No**. You will be redirected to the Azure portal interface. 

1. If presented with the **Welcome to Microsoft Azure** dialog box, click **Maybe later**. 

1. In the Azure portal, in the list of Azure services, click **Subscriptions**.

1. On the **Subscriptions** blade, click the entry representing the subscription you are using in this lab. 

1. Note that you can see all subscription properties.

1. Click the user name in the upper-right corner of the portal interface and then, in the drop-down menu, click **Sign out**.

1. In the **Pick an account** pane of the Microsoft Azure page, click **Use another account**.

1. When prompted to sign in, in the **Email, phone, or Skype** text box, type the user name of the **kari** Azure AD user account, including the **\@** symbol followed by the domain name you identified in the first task of this exercise and click **Next**.

1. In the **Password** text box, type the password you noted while creating the **kari** user account and click **Sign in**.

1. You will be presented with the **Update your password** pane. Enter the following details and then click **Update password and sign in**:

    - Current password: type the same password you just entered.

    - New password: a new password

    - Confirm password: the new password you just entered
  
    > **Note**: If you receive the message **We've seen that password too many times before. Choose something harder to guess**, you'll need to modify the password until it is unique enough to be accepted.

1. If you are prompted with the message **Stay signed in?"** click **No**. You will be redirected to the Azure portal interface. 

1. If prompted, in the Azure portal, in the **Welcome to Microsoft Azure** dialog box, click **Maybe later**. 

1. In the Azure portal, in the list of Azure services, click **Subscriptions**.

1. Note that you cannot see any subscriptions. 

     > **Note**: The Global administrator role grants, by default, permissions only to Azure AD tenant objects, not to Azure subscription resources.

1. Click the user name in the upper-right corner and click **Sign out** in the drop-down menu.

1. Close the Microsoft Edge InPrivate window.


#### Task 4: Delete the new Azure AD user
  
1. Switch back to the Microsoft Edge window displaying the Azure portal.

1. In the hub menu, click **Azure Active Directory**. 

1. On the **Default Directory - Overview** blade, in the vertical menu bar, click **Users**.

1. In the **All users** blade, in the list of users, click the checkbox to the left of the entry representing the **kari** and **deanna** user accounts and click **Delete user**.

1. When prompted to confirm, click **Yes**. 

1. Leave the Azure portal open.

> **Result**: Once you completed this exercise, you have used the Azure portal to create Azure AD user accounts, configured one of them as a Global administrator, and granted the other full permissions to your Azure subscription.


## Exercise 2: Create a new Azure AD Tenant and a custom DNS domain
  
#### Task 1: Create a new Azure AD tenant
  
1. In the Azure portal, in the hub menu, click **+ Create a resource**.

1. On the **New** blade, click **Identity**.

1. In the **Featured** section, click **Azure Active Directory**.

1. On the **Create directory** blade, specify the following settings and click **Create**:

    - Organization name: **AdatumLab**

    - Initial domain name: type any unique valid DNS domain name

    - Country or region: **United States**

1. Wait until the new Azure Active Directory tenant is provisioned.

#### Task 2: Create a custom domain in the new Azure AD tenant
  
1. Refresh the Microsoft Edge window displaying the Azure portal by pressing the **F5** key.

1. In the Azure portal, click the **Directory and Subscription filter** icon at the top of the portal page (to the right of the Cloud Shell icon).

1. In the **Directory + subscription** pane, click the **AdatumLab** entry representing the newly created Azure AD tenant. This will reload the Azure portal interface, displaying resources in the subscription associated with the new tenant. 

     > **Note**: There will be no resources appearing in the Azure portal at this point. This is expected, since the tenant is not associated with any subscriptions. 
 
1. In the list of Azure services, click **Azure Active Directory**.

1. Click **Custom domain names**.

1. Click **+ Add custom domain**.

1. On the **Custom domain name** blade, in the **Custom domain name** text box, type **adatumlab.com** and click **Add domain**.

1. On the **adatumlab.com** blade, note that the **RECORD TYPE** switch includes the options **TXT** and **MX**. In order to be able to use the **adatumlab.com** DNS domain name in the **AdatumLab** Azure Active Directory tenant, you would need to create either of these records in the DNS registrar that hosts the DNS namespace for the **adatumlab.com** domain before you click **Verify**.

1. Close the **adatumlab.com** blade.

     > **Note**: The **adatumlab.com** domain is listed with the **Unverified** status because you have not completed the verification steps.


#### Task 3: Delete an Azure AD tenant

1. On the **AdatumLab - Custom domain names** blade, in the vertical menu, click **Overview**.

1. Click **Delete directory**.

1. On the **Delete directory 'AdatumLab'** blade, review the list of required actions and click **Get permissions to delete Azure resources**.

1. On the **Properties** blade, click **Yes** in the **Access management for Azure resources** section and click **Save**.

1. Close the **Properties** blade.

1. Back on the **Delete directory 'AdatumLab'** blade, click **Refresh**.

1. Click **Delete**.

1. Click the user name in the upper-right corner of the Azure portal and click **Sign out**.


#### Task 4: Prepare for the end of the course
  
When you finish the lab, revert all virtual machines to their initial state by performing the following steps:

1. On the host computer, start Hyper-V Manager.

1. In the Virtual Machines list, right-click **10979F-MIA-CL1**, and then click **Revert**.

1. In the Revert Virtual Machine dialog box, click **Revert**.

1. Repeat steps 2 and 3 for MSL-TMG1.

> **Result**: Once you completed this exercise, you have used the Azure portal to create a new Azure AD tenant, added to it a custom DNS domain, and deleted the newly created tenant. 



©2016 Microsoft Corporation. All rights reserved.

The text in this document is available under the [Creative Commons Attribution 3.0 License](https://creativecommons.org/licenses/by/3.0/legalcode "Creative Commons Attribution 3.0 License"), additional terms may apply.  All other content contained in this document (including, without limitation, trademarks, logos, images, etc.) are **not** included within the Creative Commons license grant.  This document does not provide you with any legal rights to any intellectual property in any Microsoft product. You may copy and use this document for your internal, reference purposes.

This document is provided "as-is." Information and views expressed in this document, including URL and other Internet Web site references, may change without notice. You bear the risk of using it. Some examples are for illustration only and are fictitious. No real association is intended or inferred. Microsoft makes no warranties, express or implied, with respect to the information provided here.
